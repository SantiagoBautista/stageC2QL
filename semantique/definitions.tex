\documentclass[french]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage[a4paper]{geometry}
\usepackage{babel}
\usepackage{amsmath}
\usepackage{amssymb}
%\usepackage{latexsym} %maybe needed for \Join

\newcommand{\uconcat}{\ensuremath{+\!\!\!+\,}}

\DeclareMathOperator{\proj}{\pi}
\DeclareMathOperator{\sel}{\sigma}
\DeclareMathOperator{\frag}{frag}
\DeclareMathOperator{\defrag}{defrag}
\DeclareMathOperator{\crypt}{crypt}
\DeclareMathOperator{\decrypt}{decrypt}
\DeclareMathOperator{\group}{group}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\ens}{E}
\DeclareMathOperator{\R}{R}
\DeclareMathOperator{\Sc}{S}
\DeclareMathOperator{\s}{sch}
\DeclareMathOperator{\ls}{L}
\DeclareMathOperator{\ru}{Ru}
\DeclareMathOperator{\uni}{Unif}

\newcommand\typeT[1]{\text{\ttfamily #1}}
\newcommand{\decryptArgs}[2]{\decrypt_{#1 , \typeT{#2}}}
\newcommand{\cryptArgs}[2]{\crypt_{#1 , \typeT{#2}}}
\newcommand{\projDelta}{\proj_{\delta}}
\newcommand{\selP}{\sel_p}
\newcommand{\decryptCAlpha}{\decryptArgs{\alpha}{c}}
\newcommand{\cryptCAlpha}{\cryptArgs{\alpha}{c}}
\newcommand{\ch}{\typeT{c}}
\newcommand{\chp}{\typeT{c'}}
\newcommand{\groupDelta}{\group_{\delta}}
\newcommand{\fragDelta}{\frag_{\delta}}
\newcommand{\val}{\mathcal{V}}

\newtheorem{defi}{Définition}

\begin{document}
Le but de ce document est de donner une définition
formelle des fonctions dont est composé le langage C2QL.

\subsection*{Définitions générales}
Soit $\val$ un ensemble, appelé ensemble des valeurs.
\begin{defi}
	Ici, pour simplifier, on appelle chaîne de caractères
	tout mot sur l'alphabet 
	$$
	\Sigma = \{a, \dots, z\} \cup \{A, \dots, Z \} \cup \{0, \dots,  9 \}
 	$$
\end{defi}

\begin{defi}
	On appelle \emph{nom d'attribut} toute chaîne de caractères.
\end{defi}	

\begin{defi}
	On appelle \emph{schéma relationnel} tout ensemble
	de noms d'attributs.
\end{defi}

\begin{defi}
	On appelle \emph{relation} de schéma relationnel $\Delta$
	un ensemble de fonctions de $\Delta \cup \{ id \}$ dans $\val$.
	
	Chacune de ces fonctions (chacun des éléments de la relation)
	est appelé(e) \emph{ligne}.
	
	Pour chaque ligne $l$ de la relation et chaque $\alpha$ de $\Delta$,
	$l(\alpha)$ est appelé \emph{attribut} de \emph{nom} $\alpha$ pour la ligne $l$.
	
	L'image de $id$ est appelé \emph{identifiant de la ligne}, et il est, au sein de chaque
	relation, unique pour chaque ligne.
\end{defi}

\begin{defi}
	On appelle $\Sc$ l'ensemble des schémas relationnels possibles.
	Autrement dit, on pose  $\Sc = \mathcal{P}\left( \Sigma^* \right)$.
	
	On appelle $\R$ l'ensemble des relations possibles,
	
	et on introduit la fonction $\s$ de $\R$ dans
	$\Sc$
	qui à une relation associe son schéma relationnel.
\end{defi}

\subsection*{Projections et sélections}
\begin{defi}
	Pour tout ensemble $\delta$ de noms d'attributs,
	on appelle \emph{projection sur les attributs $\delta$}
	la fonction suivante:
	$$
	\begin{array}{llcl}
	\projDelta:	& \R 	& \rightarrow 	& \R \\
				& r		& \mapsto		& 
					\{{l|}_{(\delta\cap \s(r)) \cup \{id\}} / l \in r \}
	\end{array}
	$$
\end{defi}

\begin{defi}
	On appelle $\ls$ l'ensemble de toutes les lignes possibles.
	
	On appelle \emph{prédicat} toute fonction
	de $\ls$ dans $\{true, false\}$.
	
	On appelle \emph{domaine} d'un prédicat $p$ le plus petit
	ensemble $D$ tel que:
	$$
	\forall (l, l') \in \ls^2, (l|_D = l'|_D \Rightarrow  p(l) = p(l')) 
	$$
	et on le note $\dom(p)$.
\end{defi}

\begin{defi}
	On appelle \emph{sélection de prédicat $p$}, pour tout prédicat $p$, la fonction:
	$$
	\begin{array}{llcl}
	\selP: 	& \R 	& \rightarrow 	& \R \\
			& r		& \mapsto		& r \cap p^{-1}(\{true\})
	\end{array}
	$$
\end{defi}

\subsection*{Jointure naturelle}
\begin{defi}
	On appelle \emph{lieu de jonction} de deux
	relations $r$ et $r'$ le plus petit ensemble
	$\delta$ vérifiant
	$$
	\begin{array}{lllr}
	\forall l \in r,
	& \exists! l' \in r',
	& \forall \alpha \in \delta,
	& l(\alpha) = l'(\alpha) 
	\end{array}	
	$$
\end{defi}

\begin{defi}
	contenu...
\end{defi}

\subsection*{Fragmentation et défragmentation}

\begin{defi}
	On appelle \emph{paire de relations unifiable}
	toute paire $(r, r')$ de $\R^2$ vérifiant
	$$
	\left\lbrace
	\begin{array}{l}
	\{l(id) / l \in r \} = \{l(id) / l \in r' \} \\
	\s(r) \cap \s(r') = \emptyset
	\end{array}
	\right.
	$$
	On note $\ru$ l'ensemble des paires de relations unifiables,
	qui est donc un sous-ensemble de $\R$.
	
	On dit que deux \emph{lignes} $l$ et $l'$
	appartenant respectivement 
	sont \emph{unifiables}
	s
\end{defi}

\begin{defi}
	Pour une paire de relations unifiable $(r, r')$, on appelle
	\emph{Unificateur de $r$ et $r'$} la relation
	
	
\end{defi}

\begin{defi}
	Pour tout ensemble de noms d'attributs $\delta$
	on appelle \emph{fragmentation de fragment gauche $\delta$}
	l'application suivante:
	$$
	\begin{array}{llcl}
	\fragDelta 	& \R & \rightarrow & \ru \\
				& r  & \mapsto & (\{l|_{(\s(r)\cap \delta) \cup \{id\}}/ l \in r \}, 
						\{ l_{(\s(r) \setminus \delta)\cup \{id\}} / l \in r \})
	\end{array}
	$$
\end{defi}

\begin{defi}
	On appelle \emph{défragmentation} la fonction suivante:
	$$
	\begin{array}{llcl}
	\defrag 	& \ru & \rightarrow & \R \\
	& (r, r')  & \mapsto & \uni(r, r')
	\end{array}
	$$
\end{defi}


\end{document}